const tester = require('./calculatePercentages.js');

describe('calculatePercentages', function() {
    it('input test #1', () => {
        // 30% and 70% on first 2 archetypes
        const a = tester([0.3, 0.7], [0, 1])
        expect(a).toStrictEqual([0.032399718, 0.30112928, 0.550910858, 0.686609043, 0.761880417, 0.423899648, 0.179956782, 0.211894068, -0.549147758, -0.164831777, 0.64003269, 0.566105315, 0.553878447, 0.325484022, 1.078801539, 0.16490927, 0.149214218, 0.055399758, 0.555023324, 0.816902665, 0.269866103, 0.165950548, 0.351101399, 0.197930941])
    })
    it('input test #2', () => {
        // 100% on 1st archetype
        const a = tester([1], [0])
        expect(a).toStrictEqual([0.990632868, 1.278257593, 0.204590547, -0.053381563, 1.199237598, 1.197914527, 0.294384715, -0.000829031, -0.687710546, -0.356013983, 0.525549576, 0.533505389, 0.319557964, 0.043405267, 2.408498931, 0.929394137, 0.866297624, 0.462233107, 0.170122194, 0.918686544, 0.061917064, 0.043248403, 0.932845599, 0.5817662])
    })
    it('input test #3', () => {
        // 10% on archetypes 1 through 10
        const a = tester([0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
        expect(a).toStrictEqual([0.569387223, 0.675560343, 0.552136286, 0.539011742, 0.40849397, 0.280603941, 0.571585144, 0.467899457, 0.413236589, 0.446937834, 0.633880915, 0.778704709, 0.794049668, 0.526633464, 0.715076395, 0.307392711, 0.229981673, 0.132401576, 0.527068332, 0.581894971, 0.444672635, 0.484974779, 0.312014376, 0.400337724])
    })
    it('input test #4', () => {
        // 10% on archetypes 1 through 12 skipping types 3 and 4
        const a = tester([0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1], [0, 1, 4, 5, 6, 7, 8, 9, 10, 11])
        expect(a).toStrictEqual([0.361028391, 0.469312226, 0.566784543, 0.63488175, 0.623856018, 0.416922, 0.734423065, 0.604324958, 0.490079599, 0.553607845, 0.559172415, 0.642878919, 0.828726824, 0.563576364, 0.728588176, 0.280721431, 0.40664458, 0.446744583, 0.519481121, 0.542613545, 0.538145056, 0.519458217, 0.500735583, 0.477024103, ])
    })
    it('input test #5', () => {
        // 30% and 70% on archetypes 1 and 3
        const a = tester([0.3, 0.7], [0, 2]);
        expect(a).toStrictEqual([1.109716486, 1.113888823, -0.224094126, 0.199236961, -0.039126049, 0.085328325, -0.442602798, -0.323575217, -0.26728513, 0.08449095, 0.714878923, 0.954105092, 0.42622515, 0.257741975, 0.347777524, 1.098202484, -0.06901586, -0.680422622, 0.519241077, 1.208333968, 0.140655903, 0.27481091, -0.145387579, 0.371508977])
    })
    it('input test #6', () => {
        // 100% on 2nd archetype
        const a = tester([1], [1])
        expect(a).toStrictEqual([-0.378271632, -0.117639997, 0.699333849, 1.003747875, 0.574441625, 0.092178986, 0.13091624, 0.30306111, -0.489763706, -0.082896546, 0.689096882, 0.580076712, 0.654301511, 0.446374918, 0.508931229, -0.162727102, -0.158107242, -0.118957391, 0.719980951, 0.773281003, 0.35898712, 0.218537182, 0.101782455, 0.033430116])
    })
    it('input test #7', () => {
        // every percentage filled out for each archetype
        const a = tester([0.08, 0.08, 0.08, 0.12, 0.10, 0.09, 0.10, 0.09, 0.05, 0.07, 0.03, 0.11], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11])
        expect(a).toStrictEqual([0.41931232, 0.554395685, 0.573043888, 0.644342069, 0.385867164, 0.267288106, 0.588085591, 0.53505701, 0.502478146, 0.551560381, 0.489381476, 0.6225812, 0.835138326, 0.616876012, 0.625215348, 0.255333015, 0.181054402, 0.191569026, 0.510735538, 0.519257983, 0.485454222, 0.504816971, 0.358747996, 0.368505751, ])
    })
})